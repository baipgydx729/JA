!function(e,t){"function"==typeof define&&define.amd?define("ja",[],function(){return e.JA=t()}):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=t()),exports.JA=t()):e.JA=t()}(this,function(){"use strict";var e={version:"0.1.0"};return e}),function(e){"use strict";var t={_eventCallbacks:{},_listen:function(e,t){var n=this._eventCallbacks[e]||(this._eventCallbacks[e]=[]);n.push(t)},_resetEvents:function(){},_fire:function(e){var t=this._eventCallbacks[e.type.toLowerCase()]||[];if(0!==t.length)for(var n=0;n<t.length;n++)t[n].call(this,e)},on:function(e,t){var n=this;return e.split(/\s+/).forEach(function(e){n._listen(e.toLowerCase(),t)}),this},off:function(e,t){var n,a,r,i,u=e.split(/\s+/);for(n=0;n<u.length;n++)if(r=this._eventCallbacks[u[n].toLowerCase()]){for(i=null,a=0;a<r.length;a++)r[a]==t&&(i=a);null!==i&&r.splice(i,1)}},fire:function(e,t){return this._fire({type:e,params:t}),this}};e.event=t}(JA),function(e){"use strict";function t(e,t){n[e]=function(n){return t[e].test(n)}}var n={"boolean":function(e){return e===!0||e===!1||"[object Boolean]"===toString.call(e)},"null":function(e){return null===e},object:function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},json:function(e){return"[object Object]"===toString.call(e)},number:function(e){return n.not.nan(e)&&"[object Number]"===toString.call(e)},regexp:function(e){return"[object RegExp]"===toString.call(e)},inArray:function(e,t){if(n.not.array(t))return!1;for(var a=0;a<t.length;a++)if(t[a]===e)return!0;return!1},include:function(e,t){return e.indexOf(t)>-1},empty:function(e){if(n.object(e)){var t=Object.getOwnPropertyNames(e).length;return!!(0===t||1===t&&n.array(e)||2===t&&n.arguments(e))}return""===e}};n.VERSION="0.1.0";var a={url:/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/i,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,creditCard:/^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/,alphaNumeric:/^[A-Za-z0-9]+$/,timeString:/^(2[0-3]|[01]?[0-9]):([0-5]?[0-9]):([0-5]?[0-9])$/,dateString:/^(1[0-2]|0?[1-9])\/(3[01]|[12][0-9]|0?[1-9])\/(?:[0-9]{2})?[0-9]{2}$/,usZipCode:/^[0-9]{5}(?:-[0-9]{4})?$/,caPostalCode:/^(?!.*[DFIOQU])[A-VXY][0-9][A-Z]\s?[0-9][A-Z][0-9]$/,ukPostCode:/^[A-Z]{1,2}[0-9RCHNQ][0-9A-Z]?\s?[0-9][ABD-HJLNP-UW-Z]{2}$|^[A-Z]{2}-?[0-9]{4}$/,nanpPhone:/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/,eppPhone:/^\+[0-9]{1,3}\.[0-9]{4,14}(?:x.+)?$/,socialSecurityNumber:/^(?!000|666)[0-8][0-9]{2}-(?!00)[0-9]{2}-(?!0000)[0-9]{4}$/,affirmative:/^(?:1|t(?:rue)?|y(?:es)?|ok(?:ay)?)$/,hexadecimal:/^[0-9a-fA-F]+$/,hexColor:/^#?([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,ipv4:/^(?:(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.){3}(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])$/,ipv6:/^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9])$|^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,ip:/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$|^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9])$|^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/};for(var r in a)a.hasOwnProperty(r)&&t(r,a);e.is=n}(JA),function(e){"use strict";var t=window.location.hostname;e.cookie={set:function(e,n,a,r,i){if(i){var u=new Date,o=new Date;o.setTime(u.getTime()+36e5*i)}return window.document.cookie=e+"="+n+"; "+(i?"expires="+o.toGMTString()+"; ":"")+(r?"path="+r+"; ":"path=/; ")+(a?"domain="+a+";":"domain="+t+";"),!0},get:function(e){var t=new RegExp("(?:^|;+|\\s+)"+e+"=([^;]*)"),n=window.document.cookie.match(t);return n?n[1]:""},remove:function(e,n,a){window.document.cookie=e+"=; expires=Mon, 26 Jul 1997 05:00:00 GMT; "+(a?"path="+a+"; ":"path=/; ")+(n?"domain="+n+";":"domain="+t+";")}}}(JA),function(){"use strict";var e=navigator.userAgent;JA.platform={trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&-1==e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,iPhone:e.indexOf("iPhone")>-1,iPad:e.indexOf("iPad")>-1,webApp:-1==e.indexOf("Safari")}}(),function(e){"use strict";var t=navigator.userAgent,n=navigator.plugins,a=function(e,t){return e=(""+e).replace(/_/g,"."),t=t||1,e=String(e).split("."),e=e[0]+"."+(e[1]||"0"),e=Number(e).toFixed(t)},r={language:(navigator.browserLanguage||navigator.language).toLowerCase(),getUserAgent:function(){return t},chrome:!!t.match(/Chrome\/([\d.]+)/),firefox:!!t.match(/Firefox\/([\d.]+)/),ie:!!t.match(/Msie\/([\d.]+)/),opera:!!t.match(/Opera\/([\d.]+)/),safari:!!t.match(/Version\/([\d.]+).*Safari/),adobeAir:!!t.match(/Adobeair\/([\d.]+)/),plugins:{flash:function(){var e=0;if(n&&n.length){var t=n["Shockwave Flash"];t&&t.description&&(e=a(t.description.match(/\b(\d+)\.\d+\b/)[1],1)||e)}else for(var r=13;r--;)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+r),e=a(r);break}catch(i){}return e}()}};e.browser=r}(JA),function(e){"use strict";e.format=e.format||{};var t=function(e,t){var n={"M+":e.getMonth()+1,"D+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(Y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in n)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[a]:("00"+n[a]).substr((""+n[a]).length)));return t},n=function(e){function t(e){return 10>e||e.length<2?"0"+e:e}var n=e,a=new Date,r=new Date(a.getTime());r.setDate(r.getDate()-1);var i,u=a.getTime()-n.getTime();return i=3e5>=u?"刚刚":18e5>=u?Math.round(u/6e4)+" 分钟前":n.getFullYear()==a.getFullYear()&&n.getMonth()==a.getMonth()&&n.getDate()==a.getDate()?"今天 "+t(n.getHours())+":"+t(n.getMinutes()):n.getFullYear()==r.getFullYear()&&n.getMonth()==r.getMonth()&&n.getDate()==r.getDate()?"昨天 "+t(n.getHours())+":"+t(n.getMinutes()):n.getFullYear()==a.getFullYear()?t(n.getMonth()+1)+"-"+t(n.getDate()):t(n.getFullYear())+"-"+t(n.getMonth()+1)+"-"+t(n.getDate())};Date.prototype.format=function(e){return t(this,e)},Date.prototype.formatFriendly=function(){return n(this)},e.format={date:t,datefriendly:n}}(JA),function(e){"use strict";function t(e){return e.replace($,"").replace(x,",").replace(b,"").replace(D,"").replace(w,"").split(y)}function n(e){return"'"+e.replace(/('|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+"'"}function a(e,a){function r(e){return l+=e.split(/\n/).length-1,c&&(e=e.replace(/\s+/g," ").replace(/<!--[\w\W]*?-->/g,"")),e&&(e=A[1]+n(e)+A[2]+"\n"),e}function i(e){var n=l;if(f?e=f(e,a):u&&(e=e.replace(/\n/g,function(){return l++,"$line="+l+";"})),0===e.indexOf("=")){var r=s&&!/^=[=#]/.test(e);if(e=e.replace(/^=[=#]?|[\s;]*$/g,""),r){var i=e.replace(/\s*\([^\)]+\)/,"");p[i]||/^(include|print)$/.test(i)||(e="$escape("+e+")")}else e="$string("+e+")";e=A[1]+e+A[2]}return u&&(e="$line="+n+";"+e),m(t(e),function(e){if(e&&!F[e]){var t;t="print"===e?$:"include"===e?x:p[e]?"$utils."+e:g[e]?"$helpers."+e:"$data."+e,b+=e+"="+t+",",F[e]=!0}}),e+"\n"}var u=a.debug,o=a.openTag,d=a.closeTag,f=a.parser,c=a.compress,s=a.escape,l=1,F={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},h="".trim,A=h?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],v=h?"$out+=text;return $out;":"$out.push(text);",$="function(){var text=''.concat.apply('',arguments);"+v+"}",x="function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);"+v+"}",b="'use strict';var $utils=this,$helpers=$utils.$helpers,"+(u?"$line=0,":""),D=A[0],w="return new String("+A[3]+");";m(e.split(o),function(e){e=e.split(d);var t=e[0],n=e[1];1===e.length?D+=r(t):(D+=i(t),n&&(D+=r(n)))});var y=b+D+w;u&&(y="try{"+y+"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:"+n(e)+".split(/\\n/)[$line-1].replace(/^\\s+/,'')};}");try{var z=new Function("$data","$filename",y);return z.prototype=p,z}catch(C){throw C.temp="function anonymous($data,$filename) {"+y+"}",C}}var r=function(e,t){return"string"==typeof t?A(t,{filename:e}):o(e,t)};r.version="3.0.0",r.config=function(e,t){i[e]=t};var i=r.defaults={openTag:"<%",closeTag:"%>",escape:!0,cache:!0,compress:!1,parser:null},u=r.cache={};r.render=function(e,t){return A(e,t)};var o=r.renderFile=function(e,t){var n=r.get(e)||h({filename:e,name:"Render Error",message:"Template not found"});return t?n(t):n};r.get=function(e){var t;if(u[e])t=u[e];else if("object"==typeof document){var n=document.getElementById(e);if(n){var a=(n.value||n.innerHTML).replace(/^\s*|\s*$/g,"");t=A(a,{filename:e})}}return t};var d=function(e,t){return"string"!=typeof e&&(t=typeof e,"number"===t?e+="":e="function"===t?d(e.call(e)):""),e},f={"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"},c=function(e){return f[e]},s=function(e){return d(e).replace(/&(?![\w#]+;)|[<>"']/g,c)},l=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},F=function(e,t){var n,a;if(l(e))for(n=0,a=e.length;a>n;n++)t.call(e,e[n],n,e);else for(n in e)t.call(e,e[n],n)},p=r.utils={$helpers:{},$include:o,$string:d,$escape:s,$each:F};r.helper=function(e,t){g[e]=t};var g=r.helpers=p.$helpers;r.onerror=function(e){var t="Template Error\n\n";for(var n in e)t+="<"+n+">\n"+e[n]+"\n\n";"object"==typeof console&&console.error(t)};var h=function(e){return r.onerror(e),function(){return"{Template Error}"}},A=r.compile=function(e,t){function n(n){try{return new d(n,o)+""}catch(a){return t.debug?h(a)():(t.debug=!0,A(e,t)(n))}}t=t||{};for(var r in i)void 0===t[r]&&(t[r]=i[r]);var o=t.filename;try{var d=a(e,t)}catch(f){return f.filename=o||"anonymous",f.name="Syntax Error",h(f)}return n.prototype=d.prototype,n.toString=function(){return d.toString()},o&&t.cache&&(u[o]=n),n},m=p.$each,v="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",$=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|\s*\.\s*[$\w\.]+/g,x=/[^\w$]+/g,b=new RegExp(["\\b"+v.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),D=/^\d[^,]*|,\d[^,]*/g,w=/^,+|,+$/g,y=/^$|,+/;i.openTag="{{",i.closeTag="}}";var z=function(e,t){var n=t.split(":"),a=n.shift(),r=n.join(":")||"";return r&&(r=", "+r),"$helpers."+a+"("+e+r+")"};i.parser=function(e,t){e=e.replace(/^\s/,"");var n=e.split(" "),a=n.shift(),i=n.join(" ");switch(a){case"if":e="if("+i+"){";break;case"else":n="if"===n.shift()?" if("+n.join(" ")+")":"",e="}else"+n+"{";break;case"/if":e="}";break;case"each":var u=n[0]||"$data",o=n[1]||"as",d=n[2]||"$value",f=n[3]||"$index",c=d+","+f;"as"!==o&&(u="[]"),e="$each("+u+",function("+c+"){";break;case"/each":e="});";break;case"echo":e="print("+i+");";break;case"print":case"include":e=a+"("+n.join(",")+");";break;default:if(/^\s*\|\s*[\w\$]/.test(i)){var s=!0;0===e.indexOf("#")&&(e=e.substr(1),s=!1);for(var l=0,F=e.split("|"),p=F.length,g=F[l++];p>l;l++)g=z(g,F[l]);e=(s?"=":"=#")+g}else e=r.helpers[a]?"=#"+a+"("+n.join(",")+");":"="+e}return e},e.template=r}(JA);